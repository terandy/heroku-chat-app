(this.webpackJsonpclient_2=this.webpackJsonpclient_2||[]).push([[0],{112:function(e,n){},128:function(e,n){},130:function(e,n){},138:function(e,n,t){},139:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),a=t(27),o=t.n(a),c=t(5),u=t.n(c),l=t(8),s=t(1),d=t(18),m=t(2),f=t(3),p=t(4);function g(){var e=Object(s.a)(["\n  color: red;\n  font-size: 0.75em;\n"]);return g=function(){return e},e}function h(){var e=Object(s.a)(["\n  font-family: sans-serif;\n  padding: 2em;\n  display: ",";\n  background-color: white;\n  flex-direction: column;\n  & > * {\n    width: 100%;\n  }\n  .row {\n    flex-direction: row;\n    display: flex;\n    justify-content: space-between;\n    & > div {\n      width: 47%;\n    }\n  }\n\n  div {\n    display: ",";\n    flex-direction: column;\n    margin: 0.5em 0;\n\n    & > * {\n      margin: 0.1em 0;\n      &:focus {\n        outline: none;\n      }\n    }\n    input {\n      box-sizing: border-box;\n      font-size: 0.75em;\n      padding: 0.75em;\n      border: 1px solid lightgrey;\n      width: 100%;\n      &:hover {\n        border: 1px solid rgb(234, 171, 0);\n      }\n      &:focus {\n        background-color: rgb(250, 242, 232);\n        border: 1px solid rgb(234, 171, 0);\n      }\n    }\n    label {\n      font-size: 0.5em;\n    }\n  }\n  button {\n    width: 100%;\n    background-color: rgb(234, 171, 0);\n    border: none;\n    color: rgb(0, 57, 70);\n    font-size: 0.75em;\n    padding: 0.8em;\n    margin: 1.5em 0;\n    &:focus {\n      outline: none;\n      background-color: lightgrey;\n    }\n    &:hover {\n      background-color: lightgrey;\n      cursor: pointer;\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=Object(s.a)(["\n  text-align: left;\n  padding: 1em 0;\n  h1 {\n    font-weight: lighter;\n    font-size: 1.5em;\n    color: rgb(0, 57, 70);\n  }\n"]);return v=function(){return e},e}var b=m.a.div(v()),x=m.a.form(h(),(function(e){return e.propsDisplay}),(function(e){return e.propsDisplay})),E=m.a.div(g()),w=x,j=t(64),O=t.n(j)()(window.location.origin,{autoConnect:!1}),y=function(e){var n=Object(d.e)(),t=Object(f.b)(),a=Object(r.useState)(""),o=Object(p.a)(a,2),c=o[0],s=o[1],m=Object(r.useState)(""),g=Object(p.a)(m,2),h=g[0],v=g[1],x=Object(r.useState)(""),j=Object(p.a)(x,2),y=j[0],k=j[1],I=function(){var e=Object(l.a)(u.a.mark((function e(r){var i,a,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),(i=new FormData).append("email",c),i.append("pw",h),e.next=6,fetch("/login",{method:"POST",body:i});case 6:return a=e.sent,e.next=9,a.text();case 9:o=e.sent,(l=JSON.parse(o)).success?(t({type:"login",content:{userInfo:l.userInfo,activeUsers:l.activeUsers,convoList:l.convoList,convoUsers:l.convoUsers}}),O.connect(),O.emit("login",l.userInfo),n.push("/")):k(l.errorMessage);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return i.a.createElement(w,{onSubmit:I},i.a.createElement(b,null,i.a.createElement("h1",null,"Sign in")),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"loginEmail"},"Email"),i.a.createElement("input",{type:"text",id:"loginEmail",required:!0,autoComplete:"on",value:c,onChange:function(e){s(e.target.value)}})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"loginPw"},"Password"),i.a.createElement("input",{type:"password",id:"loginPw",required:!0,autoComplete:"off",value:h,onChange:function(e){v(e.target.value)}})),i.a.createElement("button",null,"Sign in"),i.a.createElement(E,null,y))};function k(){var e=Object(s.a)(["\n  padding: 1em 0;\n"]);return k=function(){return e},e}function I(){var e=Object(s.a)(["\n  color: grey;\n  text-align: center;\n  display: ",";\n"]);return I=function(){return e},e}function S(){var e=Object(s.a)(["\n  position: relative;\n  img {\n    display: ",";\n    position: absolute;\n    top: 1em;\n    left: 0;\n    height: 2em;\n    width: 2em;\n    border-radius: 50%;\n    object-fit: cover;\n    margin-right: 1em;\n  }\n"]);return S=function(){return e},e}function C(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: ",";\n  div {\n    background-color: ",";\n    color: ",";\n    padding: 1em;\n    width: max-content;\n    min-width: 25px;\n    max-width: 75%;\n    border-radius: ",";\n    text-align: left;\n    overflow-wrap: break-word;\n    word-wrap: break-word;\n    margin-left: 2.5em;\n  }\n"]);return C=function(){return e},e}function D(){var e=Object(s.a)(["\n  text-align: ",";\n  align-content: ",";\n"]);return D=function(){return e},e}function z(){var e=Object(s.a)(["\n  overflow: scroll;\n  padding: 00.5em;\n"]);return z=function(){return e},e}var N=m.a.div(z()),U=m.a.div(D(),(function(e){return e.me?"right ":"left"}),(function(e){return e.me?"right ":"left"})),M=m.a.div(C(),(function(e){return e.me?"flex-end":"flex-start"}),(function(e){return e.me?"lightgrey":"purple"}),(function(e){return e.me?"black":"white"}),(function(e){return e.me?"1.5em 1.5em 0 1.5em":"1.5em 1.5em 1.5em 0"})),L=m.a.div(S(),(function(e){return e.me||e.notYet?"none":"block"})),P=m.a.div(I(),(function(e){return e.notYet?"none":"block"})),T=Object(m.a)(P)(k()),F=function(e){var n=Object(r.useRef)(),t=e.convoID,a=Object(f.c)((function(e){return e.conversations[t]})),o=Object(f.c)((function(e){return e.convoUsers})),c=Object(f.c)((function(e){return e.userInfo.email}));return Object(r.useEffect)((function(){n.current&&n.current.scrollTo(0,n.current.scrollHeight)}),[a]),a?i.a.createElement(N,{ref:n},a.messages.map((function(e,n){var t=c===e.sender,r={time:!0,day:!0,sender:!0},u=new Date(e.time),l=u.getDay(),s=0===n?0:new Date(a.messages[n-1].time),d=0===n?0:a.messages[n-1].sender,m=0===n?0:s.getDay(),f=u-s;return(d!==e.sender||f>6e5)&&(r.sender=!1),f>6e5&&(r.time=!1),l-m>=1&&(r.day=!1),i.a.createElement(U,{me:t,key:n},i.a.createElement(T,{notYet:r.day},u.toDateString()),i.a.createElement(P,{notYet:r.time},u.toLocaleTimeString("en-US",{hour:"numeric",hour12:!0,minute:"numeric"})),i.a.createElement("div",null,i.a.createElement(L,{me:t,notYet:r.sender},i.a.createElement("img",{alt:"",src:o[e.sender]&&o[e.sender].imgSrc?o[e.sender].imgSrc:"/default-profile-pic.png"}),i.a.createElement(M,{me:t},i.a.createElement("div",null,e.content)))))}))):i.a.createElement("div",null)},R=t(7);function _(){var e=Object(s.a)(["\n  border: solid lightgrey 1px;\n  border-radius: 2em;\n  padding: 0.25em 1em;\n  display: grid;\n  grid-template-columns: 1fr 1em;\n  input {\n    border: none;\n    font-size: 0.75em;\n    &:focus {\n      outline: 0;\n    }\n  }\n  button {\n    border: none;\n    padding: 0;\n    img {\n      width: 100%;\n    }\n    &:focus {\n      outline: 0;\n    }\n    &:hover {\n      cursor: pointer;\n    }\n  }\n"]);return _=function(){return e},e}var J=m.a.form(_());function q(){var e=Object(s.a)(["\n  div {\n    border-radius: 1em;\n    background-color: ",";\n    color: ",";\n    display: flex;\n    align-items: center;\n    padding: 0 1em;\n    position: relative;\n    p {\n      background-color: transparent;\n    }\n    &:hover {\n      cursor: pointer;\n      background-color: rgb(250, 250, 250);\n    }\n    img {\n      border: 2px solid;\n      border-color: ",";\n      height: 2em;\n      width: 2em;\n      border-radius: 50%;\n      margin-right: 1em;\n      object-fit: cover;\n    }\n    .notification {\n      position: absolute;\n      top: 10px;\n      right: 0px;\n      height: ",";\n      width: ",";\n      border-radius: 50%;\n      background-color: ",";\n      margin: 0;\n      padding: 0;\n      transition: height ease-in-out 0.2s, width ease-in-out 0.2s;\n    }\n  }\n"]);return q=function(){return e},e}function Y(){var e=Object(s.a)(["\n  box-sizing: border-box;\n  padding: 0.5em;\n  @media screen and (max-width: 500px) {\n    width: 50%;\n  }\n  @media screen and (min-width: 500px) {\n    width: 350px;\n  }\n  height: 100%;\n  .box {\n    box-sizing: border-box;\n    background-color: white;\n    height: 100%;\n    border-radius: 0.5em;\n    padding: 0.5em;\n    display: flex;\n    flex-direction: column;\n    h2 {\n      font-size: 1em;\n    }\n    a {\n      width: 100%;\n      display: block;\n    }\n    .list-convos {\n      overflow: scroll;\n    }\n  }\n  .search {\n    padding: 0;\n    padding-bottom: 1em;\n  }\n"]);return Y=function(){return e},e}function B(){var e=Object(s.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  padding: 0.5em;\n  color: black;\n  img {\n    height: 4em;\n    width: 4em;\n    border-radius: 50%;\n    margin-right: 0.5em;\n    object-fit: cover;\n  }\n"]);return B=function(){return e},e}var W=m.a.div(B()),V=m.a.div(Y()),X=m.a.div(q(),(function(e){return e.current?"rgb(240, 240, 240)":"transparent"}),(function(e){return e.current?"rgb(120, 120, 120)":"black"}),(function(e){return e.active?"lightgreen":"lightgrey"}),(function(e){return e.notify?"10px":"0"}),(function(e){return e.notify?"10px":"0"}),(function(e){return e.notify?"purple":"transparent"})),H=function(){var e=Object(d.e)(),n=Object(f.b)(),t=Object(f.c)((function(e){return e.convoList})),a=Object(f.c)((function(e){return e.login})),o=Object(f.c)((function(e){return e.convoUsers})),c=Object(f.c)((function(e){return e.currentConvo})),u=Object(f.c)((function(e){return e.userInfo.imgSrc})),l=Object(f.c)((function(e){return e.userInfo.fname})),s=Object(f.c)((function(e){return e.userInfo.lname})),m=Object(f.c)((function(e){return e.activeUsers})),g=Object(f.c)((function(e){return e.notifications})),h=Object(r.useState)(""),v=Object(p.a)(h,2),b=v[0],x=v[1];return t?i.a.createElement(V,{loggedIn:a},i.a.createElement("div",{className:"box"},i.a.createElement(R.b,{to:"/profile",style:{textDecoration:"none"}},i.a.createElement(W,null,i.a.createElement("img",{alt:"",src:u||"/default-profile-pic.png"}),i.a.createElement("div",null,l," ",s))),i.a.createElement("h2",null,"Conversations"),i.a.createElement("div",{className:"search"},i.a.createElement(J,{onSubmit:function(e){e.preventDefault(),x("")}},i.a.createElement("input",{type:"text",onChange:function(e){x(e.target.value)},placeholder:"Search convos..."}),i.a.createElement("button",null,i.a.createElement("img",{alt:"search-icon",src:"/search.png"})))),i.a.createElement("div",{className:"list-convos"},Object.keys(t).map((function(r,a){var u=t[r].label,l=o[u].fname,s=o[u].imgSrc;return g[u]&&c===r&&n({type:"remove-notification",content:u}),""===!b||l.toUpperCase().includes(b.toUpperCase())?i.a.createElement("div",{key:"ConvoList"+a},i.a.createElement(X,{current:c===r,onClick:function(){return function(t,r){window.scrollTo({left:window.innerWidth,behavior:"smooth"}),n({type:"set-current-convo",content:t}),n({type:"remove-notification",content:r}),e.push("/messenger/"+t)}(r,u)},notify:g[u],active:m[u]},i.a.createElement("div",null,i.a.createElement("img",{alt:"",src:s||"/default-profile-pic.png"}),i.a.createElement("p",null,l),i.a.createElement("div",{className:"notification"})))):i.a.createElement("div",{key:"ConvoList"+a})}))))):i.a.createElement("div",null)};function A(){var e=Object(s.a)(["\n  display: ",";\n  height: 100%;\n  padding: 0;\n  padding-right: 1em;\n  a {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    img {\n      height: 35px;\n      width: 35px;\n    }\n  }\n"]);return A=function(){return e},e}function K(){var e=Object(s.a)(["\n  background-color: white;\n  border-bottom: lightgrey 1px solid;\n  overflow: auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return K=function(){return e},e}var Q=m.a.div(K()),G=m.a.div(A(),(function(e){return e.active?"block":"none"})),Z=function(e){var n=e.convoID,t=Object(f.c)((function(e){return e.userInfo.email})),r=Object(f.c)((function(e){return e.convoList})),a=Object(f.c)((function(e){return e.convoUsers})),o=r[n]?r[n].members:[],c=Object(f.c)((function(e){return e.activeUsers})),u=o.filter((function(e){return e!==t}));return r?i.a.createElement(Q,null,u.map((function(e,n){var t=a[e].fname,r=a[e].imgSrc;return i.a.createElement(X,{key:n},i.a.createElement(R.b,{to:"/view-profile/"+a[e]._id},i.a.createElement("div",null,i.a.createElement("img",{alt:"",src:r||"/default-profile-pic.png"}),i.a.createElement("p",null,t))))})),i.a.createElement(G,{active:!!c&&c[u[0]]},i.a.createElement(R.b,{to:"/video-chat/"+e.convoID},i.a.createElement("img",{alt:"video-chat",src:"/video-chat.png"})))):i.a.createElement("div",null)};function $(){var e=Object(s.a)(["\n  /* box-sizing: border-box; */\n  width: 100%;\n  display: flex;\n  border-top: solid 1px lightgrey;\n  padding: 0.5em 0;\n  align-items: center;\n  background-color: white;\n  div {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 3.5em;\n    &:hover {\n      cursor: pointer;\n    }\n  }\n  img {\n    height: 2em;\n    margin: 0.5em;\n  }\n  button {\n    background-color: transparent;\n    border: none;\n    &:hover {\n      cursor: pointer;\n    }\n  }\n  textarea {\n    display: flex;\n    width: 100%;\n    height: auto;\n    padding: 1em 1.5em;\n    border-radius: 2em;\n    background-color: rgb(242, 242, 242);\n    border: none;\n    resize: none;\n    &:focus {\n      outline: 0;\n    }\n  }\n"]);return $=function(){return e},e}var ee=m.a.form($()),ne=function(e){var n=Object(r.useRef)(),t=e.convoID,a=Object(r.useState)(""),o=Object(p.a)(a,2),c=o[0],s=o[1],d=Object(f.c)((function(e){return e.userInfo.email})),m=Object(f.c)((function(e){return e.conversations[t]})),g=function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),O.emit("new message",d,c,t,m.members),s(""),e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return i.a.createElement(ee,{onSubmit:g,ref:n},i.a.createElement("textarea",{rows:"1",type:"text",value:c,onChange:function(e){s(e.target.value)},onKeyDown:function(e){13===e.keyCode&&g(e)},placeholder:"Type a message..."}),i.a.createElement("button",null,i.a.createElement("img",{alt:"send",src:"/send-button.png"})))};function te(){var e=Object(s.a)(["\n  height: 100%;\n  position: relative;\n  @media screen and (max-width: 500px) {\n    width: 50%;\n  }\n  @media screen and (min-width: 500px) {\n    width: 100%;\n  }\n  box-sizing: border-box;\n  & > div {\n    box-sizing: border-box;\n    background-color: white;\n    border: lightgrey solid 1px;\n    height: 100%;\n    width: 100%;\n    display: grid;\n    position: absolute;\n    top: 0;\n    right: 0;\n    grid-template-rows: 50px 1fr 40px;\n  }\n"]);return te=function(){return e},e}function re(){var e=Object(s.a)(["\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  display: flex;\n"]);return re=function(){return e},e}var ie=m.a.div(re()),ae=m.a.div(te()),oe=function(e){var n=e.convoID;return Object(r.useEffect)((function(){n&&O.emit("getConvo",n)}),[n]),e.convoID?i.a.createElement(ie,null,i.a.createElement(H,null),i.a.createElement(ae,null,i.a.createElement("div",null,i.a.createElement(Z,{convoID:n}),i.a.createElement(F,{convoID:n}),i.a.createElement(ne,{convoID:n})))):i.a.createElement(ie,null,i.a.createElement(H,null),i.a.createElement(ae,null,i.a.createElement("img",{src:"/messenger-slide.jpeg",style:{height:"100%",width:"100%",objectFit:"cover"}})))};function ce(){var e=Object(s.a)(["\n  box-sizing: border-box;\n  position: relative;\n  height: 100%;\n  width: 100%;\n  .streams {\n    height: 100%;\n    width: 100%;\n    background-color: black;\n    .big-vid {\n      z-index: 2;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      video {\n        width: 100%;\n        max-width: 800px;\n      }\n    }\n  }\n  .options {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    height: 4em;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    img {\n      height: 90%;\n      transition: ease-in 0.1s;\n      &:hover {\n        cursor: pointer;\n        height: 100%;\n      }\n    }\n  }\n"]);return ce=function(){return e},e}function ue(){var e=Object(s.a)(["\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: 3;\n  width: ",";\n  height: ",";\n  transition: ease-in-out 0.3s;\n  &:hover {\n    cursor: pointer;\n  }\n  min-width: 100px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  video {\n    width: 100%;\n  }\n"]);return ue=function(){return e},e}var le=m.a.div(ue(),(function(e){return"big"===e.size?"400px":"medium"===e.size?"200px":"100px"}),(function(e){return"big"===e.size?"200px":"medium"===e.size?"100px":"50px"})),se=m.a.div(ce());function de(){var e=Object(s.a)(["\n  height: 100vh;\n  width: 100vw;\n  z-index: 10000;\n  color: black;\n  border: red;\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: ",";\n  justify-content: center;\n  align-items: center;\n  h1 {\n    background-color: rgba(300, 300, 300, 0.5);\n    padding: 1em;\n    border-radius: 1em;\n    font-size: 1em;\n    font-weight: lighter;\n  }\n"]);return de=function(){return e},e}var me=m.a.div(de(),(function(e){return e.show?"flex":"none"})),fe=function(e){var n=Object(r.useState)(!0),t=Object(p.a)(n,2),a=t[0],o=t[1];return Object(r.useEffect)((function(){o(!0),setTimeout((function(){return o(!1)}),2e3)}),[e.content]),i.a.createElement(me,{show:a},i.a.createElement("h1",null,e.person,e.content))},pe=t(66),ge=t.n(pe),he=function(e){var n=Object(f.b)(),t=Object(d.e)(),a=e.convoID,o=Object(f.c)((function(e){return e.userInfo.email})),c=Object(f.c)((function(e){return e.activeUsers})),u=Object(r.useRef)();u.current=c;var l=Object(r.useRef)();l.current=o;var s=Object(f.c)((function(e){return e.peers}));Object(r.useRef)().current=s;var m=Object(f.c)((function(e){return e.videoChatInitiator})),g=Object(r.useState)("medium"),h=Object(p.a)(g,2),v=h[0],b=h[1],x=Object(r.useState)("Welcome"),E=Object(p.a)(x,2),w=E[0],j=E[1],y=Object(r.useState)(""),k=Object(p.a)(y,2),I=k[0],S=k[1],C=Object(r.useState)(!1),D=Object(p.a)(C,2),z=D[0],N=D[1],U=Object(r.useState)(!1),M=Object(p.a)(U,2),L=M[0],P=M[1],T=Object(r.useState)(!1),F=Object(p.a)(T,2),R=F[0],_=F[1],J=Object(r.useState)(!1),q=Object(p.a)(J,2),Y=q[0],B=q[1];Object(r.useEffect)((function(){a&&o&&(n({type:"videoChatMode",content:!0}),O.emit("video-chat-start",a,o))}),[a,n,o]),Object(r.useEffect)((function(){m&&a&&o&&navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){var t=new ge.a({initiator:m===l.current,trickle:!1,stream:e});t.on("signal",(function(e){n({type:"set-peer",content:{data:JSON.stringify(e),user:o}}),O.emit("offer",e,o,a)})),t.on("stream",(function(e){_(e)})),P(e);O.on("offerBack",(function(e,r,i,a){n({type:"set-peer",content:{data:JSON.stringify(e),user:r}}),t.signal(e)})),B(t)}))}),[m,a,o,n]),Object(r.useEffect)((function(){O.on("video-chat-decline-back",(function(e,n){j(" has declined invite."),S(u.current[n].fname),N(!0)}))}),[]);return i.a.createElement(se,null,i.a.createElement("div",{className:"streams"},i.a.createElement("div",{className:"big-vid"},i.a.createElement("video",{key:"othervid",autoPlay:!0,muted:!0,ref:function(e){R&&e&&(e.srcObject=R)}})),i.a.createElement(le,{size:v,onClick:function(){"medium"===v&&b("big"),"small"===v&&b("medium"),"big"===v&&b("small")}},i.a.createElement("video",{key:"myvid",autoPlay:!0,muted:!0,ref:function(e){L&&e&&(e.srcObject=L)}}))),i.a.createElement("div",{className:"options"},i.a.createElement("img",{src:"/end-call.png",onClick:function(){window.confirm("You are about to leave video chat!")&&(n({type:"videoChatMode",content:!1}),O.emit("video-chat-leave",a,o),t.push("/messenger/"+a),L&&L.getTracks().map((function(e){return e.stop()})),O.off("offerBack"),Y&&Y.destroy(),n({type:"destroy-peers"}))},alt:"end-video-chat-icon"})),i.a.createElement(fe,{show:z,content:w,person:I}))};function ve(){var e=Object(s.a)(["\n  position: absolute;\n  top: 120px;\n  left: 50px;\n  .container {\n    position: relative;\n    height: 180px;\n    width: 180px;\n    &:hover {\n      cursor: pointer;\n      div {\n        display: flex;\n      }\n    }\n    input {\n      display: none;\n    }\n    img {\n      height: 100%;\n      width: 100%;\n      border-radius: 50%;\n      object-fit: cover;\n      border: 5px white solid;\n    }\n    div {\n      border-radius: 50%;\n      height: 100%;\n      width: 100%;\n      position: absolute;\n      left: 0;\n      top: 0;\n      display: none;\n      color: white;\n      justify-content: center;\n      align-items: center;\n      background-color: rgba(0, 0, 0, 0.5);\n      border: white solid 5px;\n    }\n  }\n"]);return ve=function(){return e},e}function be(){var e=Object(s.a)(["\n  .container {\n    width: 100%;\n    height: 230px;\n    img {\n      height: 100%;\n      width: 100%;\n      object-fit: cover;\n    }\n  }\n"]);return be=function(){return e},e}function xe(){var e=Object(s.a)(["\n  position: relative;\n  background-color: white;\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n  max-width: 800px;\n  min-height: 100%;\n"]);return xe=function(){return e},e}function Ee(){var e=Object(s.a)(["\n  position: absolute;\n  height: 30px;\n  width: 30px;\n  top: 250px;\n  right: 50px;\n  &:hover {\n    cursor: ",";\n  }\n  img {\n    height: 100%;\n    width: 100%;\n  }\n"]);return Ee=function(){return e},e}function we(){var e=Object(s.a)(["\n  display: ",";\n"]);return we=function(){return e},e}function je(){var e=Object(s.a)(["\n  display: ",";\n"]);return je=function(){return e},e}function Oe(){var e=Object(s.a)(["\n  display: ",";\n  margin: 6em 4em;\n"]);return Oe=function(){return e},e}function ye(){var e=Object(s.a)(["\n  display: ",";\n  text-align: left;\n  color: rgb(1, 57, 59);\n  &:hover {\n    cursor: pointer;\n    color: purple;\n    text-decoration: underline;\n  }\n"]);return ye=function(){return e},e}function ke(){var e=Object(s.a)(["\n  display: ",";\n  @media screen and (max-width: 500px) {\n    box-sizing: border-box;\n    width: 100vw;\n    margin-bottom: 4em;\n  }\n  @media screen and (min-width: 500px) {\n    width: 350px;\n  }\n  margin-top: 3em;\n"]);return ke=function(){return e},e}var Ie=Object(m.a)(w)(ke(),(function(e){return"form"===e.displayInfo?"block":"none"})),Se=m.a.div(ye(),(function(e){return e.disapear?"block":"none"})),Ce=m.a.div(Oe(),(function(e){return"info"===e.displayInfo?"block":"none"})),De=m.a.img(je(),(function(e){return 1!==e.img||e.disapear?"none":"block"})),ze=m.a.img(we(),(function(e){return 2!==e.img||e.disapear?"none":"block"})),Ne=m.a.div(Ee(),(function(e){return e.disapear?"default":"pointer"})),Ue=m.a.div(xe()),Me=m.a.div(be()),Le=m.a.label(ve()),Pe=function(){var e=Object(f.b)(),n=Object(f.c)((function(e){return e.userInfo})),t=Object(r.useState)(""),a=Object(p.a)(t,2),o=a[0],c=a[1],s=Object(r.useState)(""),d=Object(p.a)(s,2),m=d[0],g=d[1],h=Object(r.useState)(""),v=Object(p.a)(h,2),b=v[0],x=v[1],E=Object(r.useState)(""),w=Object(p.a)(E,2),j=w[0],y=w[1],k=Object(r.useState)(2),I=Object(p.a)(k,2),S=I[0],C=I[1],D=Object(r.useState)("info"),z=Object(p.a)(D,2),N=z[0],U=z[1],M=Object(r.useState)(!1),L=Object(p.a)(M,2),P=L[0],T=L[1];Object(r.useEffect)((function(){c(n.fname),g(n.lname),x(n.email),y(n.description)}),[n]);var F=function(){var n=Object(l.a)(u.a.mark((function n(t){var r,i,a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),(r=new FormData).append("description",j),r.append("fname",o),r.append("lname",m),r.append("userID",b),n.next=8,fetch("/edit-profile",{method:"POST",body:r});case 8:return i=n.sent,n.next=11,i.text();case 11:a=n.sent,JSON.parse(a).success&&(O.emit("user-edit",b),e({type:"edit-profile",content:{fname:o,lname:m,description:j}}),U("info"),T(!1));case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),R=function(){var t=Object(l.a)(u.a.mark((function t(r){var i,a,o,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new FormData).append("imgSrc",r.target.files[0]),i.append("userID",n.email),t.next=5,fetch("/edit-profile-img",{method:"POST",body:i});case 5:return a=t.sent,t.next=8,a.text();case 8:o=t.sent,(c=JSON.parse(o)).success?(O.emit("user-edit",b),e({type:"edit-profile-img",content:{imgSrc:c.imgSrc}})):console.log("ERROR - session not valid");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n?i.a.createElement(Ue,null,i.a.createElement(Me,null,i.a.createElement("div",{className:"container"},i.a.createElement("img",{alt:"profile-img",src:"/background.jpg"}))),i.a.createElement(Le,null,i.a.createElement("div",{className:"container"},i.a.createElement("img",{alt:"profile-img",src:n.imgSrc?n.imgSrc:"/default-profile-pic.png"}),i.a.createElement("div",null,"Edit Image"),i.a.createElement("input",{type:"file",onChange:function(e){R(e)}}))),i.a.createElement(Ce,{displayInfo:N},i.a.createElement("h2",null,n.fname," ",n.lname),i.a.createElement("p",null,n.description)),i.a.createElement(Ie,{onSubmit:F,displayInfo:N},i.a.createElement("h1",null,"Edit Profile"),i.a.createElement("div",null,i.a.createElement("label",null,"First Name"),i.a.createElement("input",{type:"text",value:o,onChange:function(e){c(e.target.value)}})),i.a.createElement("div",null,i.a.createElement("label",null,"Last Name")," ",i.a.createElement("input",{type:"text",value:m,onChange:function(e){g(e.target.value)}})),i.a.createElement("div",null,i.a.createElement("label",null,"Description"),i.a.createElement("input",{type:"text-area",value:j,onChange:function(e){y(e.target.value)}})),i.a.createElement("button",null,"Make Changes"),i.a.createElement(Se,{onClick:function(){U("info"),T(!1)},disapear:P},"Cancel")),i.a.createElement(Ne,{onMouseEnter:function(){return C(1)},onMouseLeave:function(){return C(2)},onClick:function(){U("form"),T(!0)},disapear:P},i.a.createElement(De,{alt:"pencil-edit",src:"/pencil-edit.png",img:S,disapear:P}),i.a.createElement(ze,{alt:"pencil-edit2",src:"/pencil-edit2.png",img:S,disapear:P}))):i.a.createElement("div",null,"loading")};function Te(){var e=Object(s.a)(["\n  color: rgb(33, 125, 183);\n  position: absolute;\n  display: flex;\n  align-items: center;\n  @media screen and (max-width: 500px) {\n    right: 10px;\n    top: 250px;\n    flex-direction: column;\n  }\n  @media screen and (min-width: 500px) {\n    right: 50px;\n    top: 250px;\n  }\n  border: 1px solid transparent;\n  &:hover {\n    cursor: pointer;\n    color: grey;\n  }\n  img {\n    height: 40px;\n    padding: 0.5em;\n  }\n"]);return Te=function(){return e},e}function Fe(){var e=Object(s.a)(["\n  .container {\n    &:hover {\n      cursor: default;\n    }\n  }\n"]);return Fe=function(){return e},e}var Re=Object(m.a)(Le)(Fe()),_e=m.a.div(Te()),Je=function(e){var n=Object(f.b)(),t=Object(d.e)(),a=Object(r.useState)("/messages.png"),o=Object(p.a)(a,2),c=o[0],s=o[1],m=Object(f.c)((function(n){return n.otherUserInfo[e.userID]})),g=Object(f.c)((function(e){return e.userInfo})),h=function(){var e=Object(l.a)(u.a.mark((function e(r){var i,a,o,c,l,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=g.email,a=[r,i],o=new FormData,a.forEach((function(e){return o.append("users",e)})),e.next=6,fetch("/get-convoID",{method:"POST",body:o});case 6:return c=e.sent,e.next=9,c.text();case 9:l=e.sent,(s=JSON.parse(l)).success&&(s.new&&O.emit("startConvo",a,s.convoID),n({type:"set-current-convo",content:s.convoID}),t.push("/messenger/"+s.convoID));case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var t=new FormData;t.append("userID",e.userID),fetch("/get-userInfo",{method:"POST",body:t}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){e.success&&n({type:"add-profile",content:e.userInfo})}))}),[e.userID,n]),m?i.a.createElement(Ue,null,i.a.createElement(Me,null,i.a.createElement("div",{className:"container"},i.a.createElement("img",{alt:"profile-img",src:"/background.jpg"}))),i.a.createElement(Re,null,i.a.createElement("div",{className:"container"},i.a.createElement("img",{alt:"profile-img",src:m.imgSrc?m.imgSrc:"/default-profile-pic.png"}))),i.a.createElement(Ce,{displayInfo:"info"},i.a.createElement("h2",null,m.fname," ",m.lname),i.a.createElement("p",null,m.description)),i.a.createElement(_e,{onMouseEnter:function(){return s("/messages-grey.png")},onMouseLeave:function(){return s("/messages.png")},onClick:function(){return h(m.email)}},"Chat",i.a.createElement("img",{src:c,alt:"start-chat-with-this-person-icon"}))):i.a.createElement("h1",null,"Loading...")};function qe(){var e=Object(s.a)(["\n  overflow: auto;\n  display: flex;\n  flex-wrap: wrap;\n  &:hover {\n    cursor: pointer;\n  }\n"]);return qe=function(){return e},e}function Ye(){var e=Object(s.a)(["\n  border-radius: 50%;\n  padding: 0;\n  margin: 0;\n  z-index: 1000;\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: none;\n  background-color: rgba(1, 1, 10, 0.6);\n  width: 100%;\n  height: 100%;\n  color: white;\n  justify-content: center;\n  align-items: center;\n  h1 {\n    color: white;\n  }\n"]);return Ye=function(){return e},e}function Be(){var e=Object(s.a)(["\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  padding: 0;\n  box-shadow: 1px 1px 5px lightgrey;\n  position: relative;\n  margin: 0.5em;\n  img {\n    border-radius: 50%;\n    height: 70px;\n    width: 70px;\n    object-fit: cover;\n  }\n  &:hover {\n    cursor: pointer;\n    .cover {\n      display: flex;\n    }\n  }\n"]);return Be=function(){return e},e}function We(){var e=Object(s.a)(["\n  display: flex;\n  width: 90%;\n  align-items: center;\n  position: relative;\n  .info {\n    text-align: left;\n    h2 {\n      font-size: 20px;\n      font-weight: normal;\n      margin: 0;\n    }\n    p {\n      font-size: 12px;\n      margin: 0;\n    }\n  }\n  img {\n    height: 50px;\n    width: 50px;\n  }\n  .cover {\n    border-radius: 0.2em;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: none;\n    justify-content: center;\n    align-items: center;\n    color: white;\n    background-color: rgba(1, 1, 10, 0.6);\n  }\n\n  &:hover {\n    cursor: pointer;\n    .cover {\n      display: flex;\n    }\n  }\n"]);return We=function(){return e},e}function Ve(){var e=Object(s.a)(["\n  background-color: white;\n  position: relative;\n  border-radius: 0.2em;\n  padding: 1em;\n  box-shadow: 1px 1px 5px lightgrey;\n  margin: 0.5em;\n  width: 100px;\n  text-align: center;\n  button {\n    color: white;\n    background-color: purple;\n    border: none;\n    padding: 0.5em;\n    &:hover {\n      cursor: pointer;\n      background-color: darkgrey;\n    }\n  }\n  img {\n    border-radius: 50%;\n    height: 70px;\n    width: 70px;\n    object-fit: cover;\n    margin-right: 0.5em;\n  }\n"]);return Ve=function(){return e},e}function Xe(){var e=Object(s.a)(["\n  overflow: scroll;\n  max-height: 90vh;\n  padding-top: 1em;\n  .err {\n    display: flex;\n    justify-content: center;\n    color: purple;\n  }\n"]);return Xe=function(){return e},e}function He(){var e=Object(s.a)(["\n  width: 100%;\n  background-color: white;\n  border-bottom: 1px solid lightgrey;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:hover {\n    input {\n      width: 300px;\n      border-bottom: lightgrey 1px solid;\n    }\n  }\n  input {\n    height: 50%;\n    border: 0;\n    width: 0;\n    transition: ease-in-out 0.5s;\n    border-bottom: transparent 1px solid;\n    &:focus {\n      outline: 0;\n      width: 300px;\n      border-bottom: lightgrey 1px solid;\n    }\n  }\n  .button {\n    height: 50%;\n    &:hover {\n      cursor: pointer;\n    }\n    img {\n      height: 100%;\n      object-fit: cover;\n    }\n  }\n"]);return He=function(){return e},e}function Ae(){var e=Object(s.a)(["\n  h1 {\n    color: grey;\n    margin: 1em 0 0 0;\n    font-size: 1em;\n    font-weight: normal;\n    display: flex;\n    justify-content: center;\n  }\n"]);return Ae=function(){return e},e}var Ke=m.a.div(Ae()),Qe=m.a.form(He()),Ge=m.a.div(Xe()),Ze=m.a.div(Ve()),$e=Object(m.a)(Ze)(We()),en=m.a.div(Be()),nn=m.a.div(Ye()),tn=m.a.div(qe()),rn=Ge,an=function(){var e=Object(d.e)(),n=Object(f.c)((function(e){return e.activeUsers})),t=Object(f.c)((function(e){return e.convoUsers})),a=Object(f.c)((function(e){return e.userInfo.email})),o=Object(r.useState)(""),c=Object(p.a)(o,2),s=c[0],m=c[1],g=Object(r.useState)(""),h=Object(p.a)(g,2),v=h[0],b=h[1],x=Object(r.useState)([]),E=Object(p.a)(x,2),w=E[0],j=E[1],O=function(){var r=Object(l.a)(u.a.mark((function r(i){var a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a="",a=n[i]?n[i]._id:t[i]._id,e.push("/view-profile/"+a);case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(u.a.mark((function e(n){var t,r,i,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==s){e.next=4;break}return j([]),e.abrupt("return");case 4:return(t=new FormData).append("searchInput",s),e.next=8,fetch("/searchQuery",{method:"POST",body:t});case 8:return r=e.sent,e.next=11,r.text();case 11:i=e.sent,(a=JSON.parse(i)).success?(m(""),console.log("results",a.results),0===a.results.length&&b("No results found"),j(a.results)):console.log("Did not find anything.");case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return i.a.createElement("div",null,i.a.createElement(Qe,{onSubmit:y},i.a.createElement("input",{placeholder:"Find user...",type:"text",onChange:function(e){""!==v&&b(""),m(e.target.value)},value:s}),i.a.createElement("div",{className:"button"},i.a.createElement("img",{src:"/search.png"}))),i.a.createElement(Ke,null,i.a.createElement(rn,null,i.a.createElement("div",{className:"err"},v),w.map((function(n,t){return i.a.createElement($e,{onClick:function(){return e.push("/view-profile/"+n._id)},key:"searched-user"+t},i.a.createElement("img",{alt:"",src:n.imgSrc?n.imgSrc:"/default-profile-pic.png"}),i.a.createElement("div",{className:"info"},i.a.createElement("h2",null,n.fname+" "+n.lname),i.a.createElement("p",null,n.description)),i.a.createElement("div",{className:"cover"},"View Profile"))})))),i.a.createElement(Ke,null,Object.keys(n).length>1?i.a.createElement("h1",null,"Currently online"):"",i.a.createElement(rn,null,Object.keys(n).map((function(e,t){return e!==a?i.a.createElement(Ze,{key:"active-user"+t},i.a.createElement("img",{alt:"",src:n[e].imgSrc?n[e].imgSrc:"/default-profile-pic.png"}),i.a.createElement("div",{className:"info"},i.a.createElement("p",null,n[e].fname),i.a.createElement("button",{onClick:function(){return O(e)}},"View Profile"))):i.a.createElement("div",{key:"non-active-user"+t})})))),i.a.createElement(Ke,null,i.a.createElement("h1",null,"Your Contacts"),i.a.createElement(tn,null,Object.keys(t).map((function(e,n){return e!==a?i.a.createElement(en,{onClick:function(){return O(e)},key:"convo-user"+n},i.a.createElement("img",{alt:"",src:t[e].imgSrc?t[e].imgSrc:"/default-profile-pic.png"}),i.a.createElement(nn,{className:"cover"},i.a.createElement("h1",null,t[e].fname))):i.a.createElement("div",{key:"non-active-user"+n})})))))},on=t(67),cn=t(68),un=t(71),ln=t(69),sn=t(73);function dn(){var e=Object(s.a)(["\n  box-sizing: border-box;\n  width: 100vw;\n  height: 100%;\n  display: grid;\n  @media screen and (max-width: 800px) {\n    grid-template-rows: ",";\n  }\n  @media screen and (min-width: 800px) {\n    grid-template-columns: ",";\n  }\n\n  background-color: ",";\n  img {\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    display: ",";\n  }\n  div {\n    box-sizing: border-box;\n    padding: 2em;\n    height: 100%;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    p {\n      padding: 1em;\n    }\n    h1 {\n      color: white;\n    }\n  }\n"]);return dn=function(){return e},e}function mn(){var e=Object(s.a)(["\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  justify-content: center;\n  display: flex;\n"]);return mn=function(){return e},e}function fn(){var e=Object(s.a)(["\n  position: relative;\n  height: 10px;\n  width: 10px;\n  margin: 10px;\n  right: 0;\n  bottom: 0;\n  border-radius: 1em;\n  z-index: 3;\n  background-color: ",";\n  &:hover {\n    cursor: pointer;\n  }\n"]);return fn=function(){return e},e}function pn(){var e=Object(s.a)(["\n  @media screen and (max-width: 800px) {\n    left: 60vw;\n  }\n  @media screen and (min-width: 800px) {\n    left: 60%;\n  }\n  justify-content: flex-end;\n"]);return pn=function(){return e},e}function gn(){var e=Object(s.a)(["\n  height: 100%;\n  @media screen and (max-width: 800px) {\n    width: 40vw;\n  }\n  @media screen and (min-width: 800px) {\n    width: 40%;\n  }\n  left: 0;\n  position: absolute;\n  justify-content: flex-start;\n  align-items: center;\n  display: flex;\n  z-index: 2;\n  img {\n    width: 30px;\n    display: ",";\n    filter: invert(1);\n    opacity: 65%;\n  }\n  &:hover {\n    cursor: pointer;\n  }\n"]);return gn=function(){return e},e}function hn(){var e=Object(s.a)(["\n  box-sizing: border-box;\n  display: flex;\n  transition: ease-in-out 0.25s;\n  @media screen and (max-width: 800px) {\n    width: ",";\n    left: ",";\n  }\n  @media screen and (min-width: 800px) {\n    width: ",";\n    left: ",";\n  }\n  height: 100%;\n  position: absolute;\n  top: 0;\n  img {\n    @media screen and (max-width: 800px) {\n      width: ",";\n    }\n    @media screen and (min-width: 800px) {\n      width: ",";\n    }\n    height: 90%;\n    object-fit: cover;\n    overflow: hidden;\n    z-index: 1;\n  }\n"]);return hn=function(){return e},e}function vn(){var e=Object(s.a)(["\n  position: relative;\n  overflow: hidden;\n  box-sizing: border-box;\n  width: 100%;\n  height: 70%;\n"]);return vn=function(){return e},e}var bn=m.a.div(vn()),xn=m.a.div(hn(),(function(e){return 100*e.length+"vw"}),(function(e){return-e.position/e.length*e.length*100+"vw"}),(function(e){return 100*e.length+"%"}),(function(e){return-e.position/e.length*e.length*100+"%"}),(function(e){return 100/e.length+"vw"}),(function(e){return 100/e.length+"%"})),En=m.a.div(gn(),(function(e){return e.toggle})),wn=Object(m.a)(En)(pn()),jn=m.a.div(fn(),(function(e){return e.bc})),On=m.a.div(mn()),yn=m.a.div(dn(),(function(e){return e.slideStyle.imgPath?"1fr 2fr":"1fr"}),(function(e){return e.slideStyle.imgPath?"1fr 2fr":"1fr"}),(function(e){return e.slideStyle.color}),(function(e){return e.slideStyle.imgPath?"block":"none"})),kn=function(e){function n(e){var t;return Object(on.a)(this,n),(t=Object(un.a)(this,Object(ln.a)(n).call(this,e))).componentDidUpdate=function(e){e.mainImage!==t.props.mainImage&&t.setState({position:t.state.position})},t.displayArrows=function(){t.setState({toggle:"block"}),setTimeout((function(){t.setState({toggle:"none"})}),1500)},t.shiftLeft=function(){0!==t.state.position&&t.setState({position:t.state.position-1})},t.shiftRight=function(){t.state.position!==t.props.slides.length-1&&t.setState({position:t.state.position+1})},t.state={toggle:"none",position:0},t}return Object(sn.a)(n,e),Object(cn.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement(bn,{onMouseEnter:this.displayArrows},i.a.createElement(En,{toggle:this.state.toggle,onClick:this.shiftLeft},i.a.createElement("img",{src:"/left-arrow.png"})),i.a.createElement(xn,{position:this.state.position,length:this.props.slides.length},this.props.slides.map((function(e,n){return i.a.createElement(yn,{key:"imgSlider"+n,slideStyle:e},i.a.createElement("div",null,i.a.createElement("h1",null,e.title),i.a.createElement("p",null,e.title2)),i.a.createElement("img",{src:e.imgPath}))}))),i.a.createElement(wn,{toggle:this.state.toggle,onClick:this.shiftRight},i.a.createElement("img",{src:"/right-arrow.png"})),i.a.createElement(On,null,this.props.slides.map((function(n,t){return i.a.createElement(jn,{onMouseEnter:function(){return e.setState({position:t})},key:t,bc:t===e.state.position?"#0064cf":"grey"})}))))}}]),n}(r.Component);function In(){var e=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  .innerDiv {\n    width: 100%;\n    height: 100%;\n    /* @media screen and (min-width: 800px) {\n      padding: 0 ","px;\n    } */\n  }\n"]);return In=function(){return e},e}var Sn=[{color:"#7CB9E8",title:"Welcome!",title2:"Experience a dynamic user interface, built with React.js and a Node.js web server, hosted by Heroku."},{color:"rgb(253,193,49)",title:"Discover new people!",title2:"See who is currently online, and view their profile. Information is saved on a MongoDB database",imgPath:"/discover-slide.jpg"},{color:"#2177B6",title:"Chat with users!",title2:"Messages update instantly, using WebSocket technology.",imgPath:"/messenger-slide.jpeg"},{color:"rgb(150,85,183)",title:"Video chat!",title2:"Connect directly to peers, using WebRTC.",imgPath:"/video-chat-slide.png"}],Cn=m.a.div(In(),80),Dn=function(){return i.a.createElement(Cn,null,i.a.createElement("div",{className:"innerDiv"},i.a.createElement(kn,{slides:Sn})))},zn=function(e){var n=Object(d.e)(),t=Object(f.b)(),a=Object(r.useState)(""),o=Object(p.a)(a,2),c=o[0],s=o[1],m=Object(r.useState)(""),g=Object(p.a)(m,2),h=g[0],v=g[1],x=Object(r.useState)(""),j=Object(p.a)(x,2),y=j[0],k=j[1],I=Object(r.useState)(""),S=Object(p.a)(I,2),C=S[0],D=S[1],z=Object(r.useState)(""),N=Object(p.a)(z,2),U=N[0],M=N[1],L=Object(r.useState)(""),P=Object(p.a)(L,2),T=P[0],F=P[1],R=function(){var e=Object(l.a)(u.a.mark((function e(r){var i,a,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),D(""),y===h){e.next=7;break}return D("Passwords don't match!"),e.abrupt("return");case 7:return(i=new FormData).append("email",c),i.append("pw",h),i.append("fname",U),i.append("lname",T),e.next=14,fetch("/register",{method:"POST",body:i});case 14:return a=e.sent,e.next=17,a.text();case 17:o=e.sent,(l=JSON.parse(o)).success?(s(""),v(""),k(""),M(""),F(""),t({type:"login",content:{userInfo:l.userInfo,activeUsers:l.activeUsers,convoList:l.convoList,convoUsers:l.convoUsers}}),O.connect(),O.emit("login",l.userInfo),n.push("/")):D(l.errorMessage);case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return i.a.createElement(w,{onSubmit:R},i.a.createElement(b,null,i.a.createElement("h1",null,"Register")),i.a.createElement("div",{className:"row"},i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"fname"},"First Name"),i.a.createElement("input",{type:"text",id:"fname",required:!0,autoComplete:"on",value:U,onChange:function(e){M(e.target.value)}})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"lname"},"Last Name"),i.a.createElement("input",{type:"text",id:"lname",required:!0,autoComplete:"on",value:T,onChange:function(e){F(e.target.value)}}))),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"email"},"Email"),i.a.createElement("input",{type:"text",id:"email",required:!0,autoComplete:"on",value:c,onChange:function(e){s(e.target.value)}})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"pw"},"Password"),i.a.createElement("input",{type:"password",id:"pw",required:!0,autoComplete:"off",value:h,onChange:function(e){v(e.target.value)}})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"confirmPw"},"Confirm password"),i.a.createElement("input",{type:"password",id:"confirmPw",required:!0,autoComplete:"off",value:y,onChange:function(e){k(e.target.value)}})),i.a.createElement("button",null,"Create account"),i.a.createElement(E,null,C))};function Nn(){var e=Object(s.a)(["\n  display: ",";\n  z-index: 100;\n  background-color: rgb(100, 100, 100);\n  position: fixed;\n  @media screen and (min-width: 500px) {\n    left: 0;\n    top: ","px;\n    height: 100%;\n    & > div {\n      width: ","px;\n      text-align: center;\n      a {\n        font-size: 0.7em;\n        text-decoration: none;\n        color: white;\n        height: min-content;\n      }\n      div {\n        box-sizing: border-box;\n        padding: 1em;\n        margin-bottom: 2em;\n        position: relative;\n        height: 70px;\n        &:hover {\n          padding: 0.5em;\n        }\n        img {\n          width: 70%;\n        }\n      }\n    }\n  }\n  @media screen and (max-width: 500px) {\n    bottom: 0;\n    width: 100%;\n    height: ","px;\n    & > div {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n      a {\n        font-size: 0.7em;\n        text-decoration: none;\n        color: white;\n        height: 100%;\n        width: 30%;\n      }\n\n      div {\n        box-sizing: border-box;\n        padding: 1em;\n        position: relative;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        &:hover {\n          padding: 0.5em;\n        }\n        img {\n          height: 70%;\n          width: auto;\n          margin-bottom: 0.5em;\n        }\n      }\n    }\n  }\n  .notify {\n    position: absolute;\n    top: 10px;\n    right: 1em;\n    height: ",";\n    width: ",";\n    border-radius: 50%;\n    background-color: ",";\n    margin: 0;\n    padding: 0;\n    transition: height ease-in-out 0.2s, width ease-in-out 0.2s;\n  }\n"]);return Nn=function(){return e},e}var Un=m.a.div(Nn(),(function(e){return e.logggedIn&&!e.videoChatMode?"block":"none"}),50,80,80,(function(e){return e.notify?"10px":"0"}),(function(e){return e.notify?"10px":"0"}),(function(e){return e.notify?"purple":"transparent"})),Mn=function(){var e=Object(d.f)(),n=Object(f.c)((function(e){return e.login})),t=Object(f.c)((function(e){return e.videoChatMode})),a=Object(f.c)((function(e){return e.notifications})),o=Object(r.useState)(!1),c=Object(p.a)(o,2),u=c[0],l=c[1];return Object(r.useEffect)((function(){Object.values(a).some((function(e){return!0===e}))&&"/messenger"!==e.pathname.slice(0,10)?l(!0):l(!1)}),[a,e.pathname]),i.a.createElement(Un,{logggedIn:n,videoChatMode:t,notify:u},i.a.createElement("div",null,i.a.createElement(R.b,{to:"/active-users"},i.a.createElement("div",null,i.a.createElement("img",{alt:"",src:"/find-users.png"}),"Discover")),i.a.createElement(R.b,{to:"/profile"},i.a.createElement("div",null,i.a.createElement("img",{alt:"",src:"/edit-profile.png"}),"Profile")),i.a.createElement(R.b,{onClick:function(){window.scrollTo({left:0})},to:"/messenger"},i.a.createElement("div",null,i.a.createElement("img",{alt:"",src:"/messages.png"}),"Chat",i.a.createElement("div",{className:"notify"})))))},Ln=function(e){var n=Object(f.b)(),t=Object(f.c)((function(e){return e.userInfo.email})),r=function(){var e=Object(l.a)(u.a.mark((function e(){var r,i,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.emit("logout",t),O.disconnect(),(r=new FormData).append("userID",t),e.next=6,fetch("/logout",{method:"POST",body:r});case 6:return i=e.sent,e.next=9,i.text();case 9:a=e.sent,JSON.parse(a).success&&n({type:"logout",content:t});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(R.b,{to:"/",onClick:r},"Logout")};function Pn(){var e=Object(s.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return Pn=function(){return e},e}function Tn(){var e=Object(s.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 30px;\n  width: 30px;\n  font-size: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:hover {\n    cursor: pointer;\n  }\n"]);return Tn=function(){return e},e}function Fn(){var e=Object(s.a)(["\n  margin-left: 1em;\n  &:hover {\n    cursor: pointer;\n    color: purple;\n    text-decoration: underline;\n  }\n"]);return Fn=function(){return e},e}function Rn(){var e=Object(s.a)(["\n  box-sizing: border-box;\n  position: fixed;\n  display: ",";\n  top: 0;\n  height: ","px;\n  width: 100%;\n  border-bottom: solid 1px lightgrey;\n  @media screen and (max-width: 500px) {\n    padding: 0 ","px;\n  }\n  @media screen and (min-width: 500px) {\n    padding: 0 ","px;\n  }\n  z-index: 1000;\n  background-color: white;\n  .divContainer {\n    width: 100%;\n    height: 100%;\n    display: ",";\n    color: rgb(0, 56, 70);\n    justify-content: space-between;\n    align-items: center;\n    .rightLinks {\n      display: flex;\n    }\n  }\n"]);return Rn=function(){return e},e}function _n(){var e=Object(s.a)(["\n  transition: ease-in-out 0.5s;\n  position: absolute;\n  top: ","px;\n  height: 100vh;\n  box-sizing: border-box;\n  @media screen and (min-width: 500px) {\n    width: 400px;\n    right: ",";\n  }\n  @media screen and (max-width: 500px) {\n    width: 100vw;\n    right: ",";\n  }\n  background-color: white;\n"]);return _n=function(){return e},e}var Jn=m.a.div(_n(),50,(function(e){return"flex"===e.propsDisplay?"0":"-400px"}),(function(e){return"flex"===e.propsDisplay?"0":"-100vw"})),qn=m.a.div(Rn(),(function(e){return e.videoChatMode?"none":"block"}),50,40,80,(function(e){return e.videoChatMode?"none":"flex"})),Yn=m.a.div(Fn()),Bn=m.a.div(Tn()),Wn=m.a.div(Pn()),Vn=function(){var e=Object(f.c)((function(e){return e.login})),n=Object(f.c)((function(e){return e.videoChatMode})),t=Object(f.c)((function(e){return e.userInfo.fname})),a=Object(r.useState)("none"),o=Object(p.a)(a,2),c=o[0],u=o[1],l=Object(r.useState)("none"),s=Object(p.a)(l,2),d=s[0],m=s[1];Object(r.useEffect)((function(){e&&g()}),[e]);var g=function(){u("none"),m("none")};return e?i.a.createElement(qn,{videoChatMode:n},i.a.createElement("div",{className:"divContainer"},i.a.createElement("div",null,"Hi ",t),i.a.createElement("div",null,i.a.createElement(Ln,null)))):i.a.createElement(qn,null,i.a.createElement("div",{className:"divContainer"},i.a.createElement("div",null,"Welcome"),i.a.createElement("div",{className:"rightLinks"},i.a.createElement(Yn,{onClick:function(){"flex"===c?u("none"):(u("flex"),m("none"))}},"Login"),i.a.createElement(Jn,{propsDisplay:c},i.a.createElement(Wn,null,i.a.createElement(Bn,{onClick:g},"x"),i.a.createElement(y,null))),i.a.createElement(Yn,{onClick:function(){"flex"===d?m("none"):(m("flex"),u("none"))}},"Register"),i.a.createElement(Jn,{propsDisplay:d},i.a.createElement(Wn,null,i.a.createElement(Bn,{onClick:g},"x"),i.a.createElement(zn,null))))))};function Xn(){var e=Object(s.a)(["\n  box-sizing: border-box;\n  padding-top: ",";\n  overflow: scroll;\n  @media screen and (max-width: 500px) {\n    padding-bottom: ",";\n  }\n  @media screen and (min-width: 500px) {\n    padding-left: ",";\n  }\n  width: 100%;\n  height: 100%;\n"]);return Xn=function(){return e},e}function Hn(){var e=Object(s.a)(["\n  height: 100vh;\n  width: 100vw;\n  min-width: 300px;\n  @media screen and (max-width: 500px) {\n    width: ",";\n  }\n  @media screen and (min-width: 500px) {\n    width: 100vw;\n  }\n"]);return Hn=function(){return e},e}function An(){var e=Object(s.a)([""]);return An=function(){return e},e}var Kn=m.a.div(An()),Qn=m.a.div(Hn(),(function(e){return e.messenger?"200vw":"100vw"})),Gn=m.a.div(Xn(),(function(e){return e.videoChatMode?"0":"50px"}),(function(e){return e.videoChatMode||!e.loggedIn?"0":"80px"}),(function(e){return e.videoChatMode||!e.loggedIn?"0":"80px"})),Zn=function(){var e=Object(d.e)(),n=Object(f.b)(),t=Object(f.c)((function(e){return e.userInfo.email})),a=Object(f.c)((function(e){return e.videoChatInvite})),o=Object(f.c)((function(e){return e.login})),c=Object(f.c)((function(e){return e.conversations})),s=Object(f.c)((function(e){return e.videoChatMode})),m=Object(r.useRef)();Object(r.useRef)().current=t,m.current=c;var p=Object(f.c)((function(e){return e.peers}));Object(r.useRef)().current=p,Object(r.useEffect)((function(){O.on("active login",(function(e){n({type:"active-login",content:e})})),O.on("active logout",(function(e){n({type:"active-logout",content:e})})),O.on("send convo",(function(e,t,r){n({type:"new-convo",content:{convoID:e,convo:t,arrayOfMemberInfo:r}})})),O.on("get message",(function(e,t,r,i,a,o){!function(e,t,r,i,a,o){m.current[e]||n({type:"new-convo",content:{convoID:e,convo:{convoID:e,messages:[],members:a},arrayOfMemberInfo:o}});n({type:"get-message",content:{sender:t,content:r,time:i,convoID:e}})}(e,t,r,i,a,o)})),O.on("active-user-edit",(function(e){e.email!==t&&n({type:"update-active-user",content:{userID:e.email,userInfo:e}})})),O.on("new convo",(function(e,t,r){n({type:"new-convo",content:{convoID:e,convo:t,arrayOfMemberInfo:r}})})),O.on("video-chat-initiator",(function(e){n({type:"video-chat-initiator",content:{initiator:e}})})),O.on("video-chat-start-invite",(function(e){n({type:"video-chat-start-invite",content:{convoID:e}})}))}),[n]),Object(r.useEffect)((function(){a.start&&(window.confirm("join videoChat?")?e.push("/video-chat/"+a.convoID):O.emit("video-chat-decline",a.convoID,t),n({type:"reset-chat-start-invite"}))}),[a,t,n,e]);return Object(r.useEffect)((function(){o||function(){var e=Object(l.a)(u.a.mark((function e(){var t,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/check-cookies",{method:"POST"});case 2:return t=e.sent,e.next=5,t.text();case 5:r=e.sent,(i=JSON.parse(r)).success&&(O.connect(),O.emit("reload",i.userInfo),n({type:"login",content:{userInfo:i.userInfo,activeUsers:i.activeUsers,convoList:i.convoList,convoUsers:i.convoUsers}}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o,n]),i.a.createElement(Kn,{loggedIn:o},i.a.createElement(Vn,null),i.a.createElement(Qn,{messenger:window.location.href.includes("messenger")},i.a.createElement(Mn,null),i.a.createElement(Gn,{videoChatMode:s,loggedIn:o},i.a.createElement(d.a,{exact:!0,path:"/",render:function(){return i.a.createElement(Dn,null)}}),i.a.createElement(d.a,{exact:!0,path:"/video-chat/:mid",render:function(e){return function(e){return i.a.createElement(he,{convoID:e.match.params.mid})}(e)}}),i.a.createElement(d.a,{exact:!0,path:"/messenger/:mid",render:function(e){return function(e){return i.a.createElement(oe,{convoID:e.match.params.mid})}(e)}}),i.a.createElement(d.a,{exact:!0,path:"/messenger",render:function(){return i.a.createElement(oe,null)}}),i.a.createElement(d.a,{exact:!0,path:"/profile",render:function(){return i.a.createElement(Pe,null)}}),i.a.createElement(d.a,{exact:!0,path:"/view-profile/:userID",render:function(e){return function(e){return i.a.createElement(Je,{userID:e.match.params.userID})}(e)}}),i.a.createElement(d.a,{exact:!0,path:"/active-users",render:function(){return i.a.createElement(an,null)}}),i.a.createElement(d.a,{exact:!0,path:"/login",render:function(){return i.a.createElement(y,null)}}),i.a.createElement(d.a,{exact:!0,path:"/register",render:function(){return i.a.createElement(zn,null)}}))))},$n=t(28),et=t(70),nt={login:!1,userInfo:{},conversations:{},activeUsers:{},convoList:{},convoUsers:{},currentConvo:"",notifications:{},otherUserInfo:{},videoChatMode:!1,videoChatInitiator:"",videoChatInvite:{start:!1,convoID:""},peers:{}},tt=Object($n.b)((function(e,n){return Object(et.a)(e,(function(t){switch(n.type){case"edit-profile":t.userInfo.fname=n.content.fname,t.userInfo.lname=n.content.lname,t.userInfo.description=n.content.description;break;case"videoChatMode":t.videoChatMode=n.content;break;case"video-chat-start-invite":t.videoChatInvite={start:!0,convoID:n.content.convoID};break;case"update-active-user":t.activeUsers[n.content.userID]=n.content.userInfo;break;case"video-chat-initiator":t.videoChatInitiator=n.content.initiator;break;case"reset-chat-start-invite":t.videoChatInvite={start:!1,convoID:""},t.videoChatInitiator="";break;case"set-peer":t.peers[n.content.user]=n.content.data;break;case"destroy-peers":t.peers={};break;case"login":t.login=!0,t.userInfo=n.content.userInfo,t.activeUsers=n.content.activeUsers,t.convoList=n.content.convoList,t.convoUsers=n.content.convoUsers,Object.keys(n.content.convoList).forEach((function(e){t.conversations[e]={messages:[],members:[]}}));break;case"edit-profile-img":t.userInfo.imgSrc=n.content.imgSrc;break;case"set-current-convo":t.currentConvo=n.content;break;case"new-convo":var r,i=n.content;r=i.convo.members[0]!==e.userInfo.email?i.convo.members[0]:i.convo.members[1],t.notifications[r]=!0,t.conversations[i.convoID]=i.convo,t.convoList[i.convoID]={label:r,members:i.convo.members},i.arrayOfMemberInfo.forEach((function(n){n.info!==e.userInfo.email&&(t.convoUsers[n.email]=n)}));break;case"active-login":t.activeUsers[n.content.email]=n.content;break;case"remove-notification":t.notifications[n.content]=!1;break;case"active-logout":delete t.activeUsers[n.content];break;case"get-message":t.conversations[n.content.convoID].messages.push({sender:n.content.sender,content:n.content.content,time:n.content.time}),t.notifications[n.content.sender]=!0;break;case"add-profile":t.otherUserInfo[n.content._id]=n.content;break;case"logout":return nt;default:return e}}))}),nt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());t(138);o.a.render(i.a.createElement(f.a,{store:tt},i.a.createElement(R.a,null,i.a.createElement(Zn,null))),document.getElementById("root"))},74:function(e,n,t){e.exports=t(139)}},[[74,1,2]]]);
//# sourceMappingURL=main.7ee59a1a.chunk.js.map